<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Admin Panel Login</title>
  <link rel="stylesheet" href="../assets/css/login.css">
</head>
<body class="auth-body">

  <div class="login-card">

    <div class="logo">TechCells</div>

    <h2>Welcome Back!</h2>

    <label>Email Address</label>
    <input id="email" type="email" placeholder="techcells@mail.com" />

    <label>Password</label>
    <input id="password" type="password" placeholder="••••••••" />

    <div class="row">
     <div class="remember">
  <label>
    <input type="checkbox" id="rememberMe">
    Remember me
  </label>
</div>
      <a href="forgot-password.html" class="forgot">Forgot your password?</a>

    </div>

    <button onclick="login()">Log in</button>

    <p id="error" class="error"></p>
  </div>

<script>
const API_URL =
  location.hostname === "localhost"
    ? "http://localhost:3000"
    : "https://secure-clock-system.onrender.com";

async function login() {
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;
  const error = document.getElementById("error");

  error.innerText = "";

  if (!email || !password) {
    error.innerText = "Email va parolni kiriting";
    return;
  }

  const res = await fetch(`${API_URL}/api/admin/login`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ email, password })
  });

  const data = await res.json();

  if (!res.ok) {
    error.innerText = data.error || "Login failed";
    return;
  }

  localStorage.setItem("token", data.token);
  window.location.href = "dashboard.html";
}
</script>

</body>
</html>
